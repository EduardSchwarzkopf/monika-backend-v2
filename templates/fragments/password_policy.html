<script>
    const passwordField = document.getElementById('password');
    const passwordConfirmField = document.getElementById('password_confirm');
    const submitButton = document.getElementById('submit');
    const passwordErrorDiv = document.getElementById('password_error');
    const passwordConfirmErrorDiv = document.getElementById('password_confirm_error');

    function checkPasswordPolicy(password) {
        if (password.length < 8) {
            return "Password should be at least 8 characters long.";
        }
        if (!/[A-Z]/.test(password)) {
            return "Password should contain at least one uppercase character.";
        }
        if (!/[a-z]/.test(password)) {
            return "Password should contain at least one lowercase character.";
        }
        if (!/[0-9]/.test(password)) {
            return "Password should contain at least one digit.";
        }
        if (!/[!@#$%^&*()]/.test(password)) {
            return "Password should contain at least one special character.";
        }
        return null;
    }

    passwordField.addEventListener('input', function () {
        const password = passwordField.value;
        const policyError = checkPasswordPolicy(password);
        if (policyError) {
            passwordErrorDiv.style.display = "block";
            passwordErrorDiv.textContent = policyError;
            submitButton.disabled = true;
        } else {
            passwordErrorDiv.style.display = "none";
            submitButton.disabled = false;
        }
    });

    passwordConfirmField.addEventListener('input', function () {
        const password = passwordField.value;
        const passwordConfirm = passwordConfirmField.value;
        if (password !== passwordConfirm) {
            passwordConfirmErrorDiv.style.display = "block";
            passwordConfirmErrorDiv.textContent = "Passwords do not match.";
            submitButton.disabled = true;
        } else {
            passwordConfirmErrorDiv.style.display = "none";
            submitButton.disabled = false;
        }
    });
</script>